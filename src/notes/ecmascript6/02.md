:::snippet Symbol 类型

1. Symbol 独一无二数据类型，属于 JavaScrit 的基本数据类型，通过函数生成 Symbol

```javascript
let s = Symbol();
typeof s; // "symbol"
let s1 = Symbol("foo");
s1.toString(); // "Symbol(foo)"
```

2. 自定义 Symbol 的 toStirng 方法

```javascript
const obj = {
  toString() {
    return "abc";
  }
};
const sym = Symbol(obj);
sym; // Symbol(abc)
```

3. Symbol 参数相同两个值也不相等

```javascript
// 没有参数的情况
let s1 = Symbol();
let s2 = Symbol();
s1 === s2; // false

// 有参数的情况
let s1 = Symbol("foo");
let s2 = Symbol("foo");
s1 === s2; // false
```

4. Symbol 只能进行 Boolean 和 Stirng 转换，其他类型转换报错

```javascript
let sym = Symbol("My symbol");
String(sym); // 'Symbol(My symbol)'
sym.toString(); // 'Symbol(My symbol)'
let sym = Symbol();
Boolean(sym); // true
```

5. 同伙 Symbol.for 定义的变量，实际产生的是同一个值

```javascript
let s1 = Symbol.for("foo");
let s2 = Symbol.for("foo");
s1 === s2; // true
```

6. Symbol.keyFor 方法返回一个已登记的 Symbol 类型值的 key。

```javascript
let s1 = Symbol.for("foo");
Symbol.keyFor(s1); // "foo"
let s2 = Symbol("foo");
Symbol.keyFor(s2); // undefined
```

:::

:::snippet Set 与 WeakSet

1. Set 类似于数组，但是成员的值都是唯一的，没有重复的值

```javascript
const s = new Set();
[2, 3, 5, 4, 5, 2, 2].forEach(x => s.add(x));
for (let i of s) {
  console.log(i); // 2 3 5 4
}
```

2. 设置数组作为参数初始化 Set

```javascript
const set = new Set([1, 2, 3, 4, 4]);
[...set]; // [1, 2, 3, 4]

const items = new Set([1, 2, 3, 4, 5, 5, 5, 5]);
items.size; // 5

const set = new Set(document.querySelectorAll("div"));
set.size; // 56

const set = new Set();
document.querySelectorAll("div").forEach(div => set.add(div));
set.size; // 56
```

3. Set 方法

| 方法          | 描述                                           |
| ------------- | ---------------------------------------------- |
| add(value)    | 添加某个值，返回 Set 结构本身。                |
| delete(value) | 删除某个值，返回一个布尔值，表示删除是否成功。 |
| has(value)    | 返回一个布尔值，表示该值是否为 Set 的成员。    |
| clear()       | 清除所有成员，没有返回值。                     |

4. WeakSet 与 Set 类似，不同的是成员只能是对象

```javascript
const a = [[1, 2], [3, 4]];
const ws = new WeakSet(a); // WeakSet {[1, 2], [3, 4]}
```

> WeakSet 的对象成员都是弱引用，没有其他对象引用 WeakSet 的成员，就会被垃圾回收，会导致直接访问 WeakSet 的成员可能已经被销毁不存在

:::

:::snippet Map 与 WeakMap

1. 键值对存储 hash 实现，key 可以是对象，object 的 key 会被自动转为字符串无法存储复杂类型

```javascript
const m = new Map();
const o = { p: "Hello World" };
m.set(o, "content");
m.get(o); // "content"
m.has(o); // true
m.delete(o); // true
m.has(o); // false
```

2. 数组作为参数初始化 Map

```javascript
const items = [["name", "张三"], ["title", "Author"]];
const map = new Map();
items.forEach(([key, value]) => map.set(key, value));
```

3. Map 方法

| 方法            | 描述                    |
| --------------- | ----------------------- |
| set(key, value) | 设置 key 对应的 value。 |
| get(key)        | 获取 key 对应的 value。 |
| has(key)        | 判断 key 是否存在。     |
| delete(key)     | 删除 key 对应的项。     |
| clear()         | 清空所有成员            |

4. WeakMap 与 Map 类似，key 只能为对象，key 对应的值不计入垃圾回收对象，所以引用销毁该对应值自动销毁

```javascript
const wm1 = new WeakMap();
const key = { foo: 1 };
wm1.set(key, 2);
wm1.get(key); // 2
```

:::

:::snippet Proxy 代理

:::
